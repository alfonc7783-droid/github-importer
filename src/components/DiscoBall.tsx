/**
 * =============================================================================
 * КОМПОНЕНТ ДИСКО-ШАРА
 * =============================================================================
 * 
 * Файл: src/components/DiscoBall.tsx
 * Описание: Декоративный анимированный диско-шар с эффектом параллакса
 * 
 * ФУНКЦИОНАЛЬНОСТЬ:
 * ─────────────────
 * - Отображает GIF-анимацию диско-шара
 * - При прокрутке страницы шар опускается (параллакс-эффект)
 * - Имеет анимированные лучи света
 * - Подвешен на визуальной "нити"
 * 
 * ПАРАЛЛАКС-ЭФФЕКТ:
 * ─────────────────
 * - Начальная позиция: top = -40px (шар частично за экраном)
 * - При скролле: top увеличивается на 30% от scrollY
 * - Максимум: 100px (чтобы шар не уходил слишком далеко)
 * 
 * СТИЛИЗАЦИЯ:
 * ───────────
 * - Фиксированная позиция (position: fixed)
 * - Центрирован по горизонтали
 * - pointer-events: none — не мешает кликам
 * - z-index: 40 — над контентом, но под модальными окнами
 * 
 * АССЕТЫ:
 * ───────
 * - src/assets/disco-ball.gif — анимированный диско-шар
 * 
 * @see src/pages/Home.tsx - Используется на главной странице
 */
import { useEffect, useState } from 'react';
import discoBallGif from '@/assets/disco-ball.gif';

// ═══════════════════════════════════════════════════════════════════════════
// КОМПОНЕНТ
// ═══════════════════════════════════════════════════════════════════════════

/**
 * Диско-шар с эффектом параллакса
 * Декоративный элемент, создающий атмосферу праздника
 */
const DiscoBall = () => {
  /**
   * Текущая позиция скролла
   * Используется для расчёта параллакс-эффекта
   */
  const [scrollY, setScrollY] = useState(0);

  /**
   * Подписка на событие прокрутки
   * Обновляет scrollY при каждом скролле
   */
  useEffect(() => {
    const handleScroll = () => {
      setScrollY(window.scrollY);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  return (
    <div 
      className="fixed left-1/2 -translate-x-1/2 z-40 pointer-events-none"
      style={{ 
        // Параллакс: шар опускается при скролле (макс. 100px)
        top: `${Math.min(scrollY * 0.3, 100) - 40}px`,
      }}
    >
      {/* ═══════════════════════════════════════════════════════════════ */}
      {/* НИТЬ ПОДВЕСА */}
      {/* ═══════════════════════════════════════════════════════════════ */}
      <div 
        className="absolute left-1/2 -translate-x-1/2 -top-32 w-0.5 h-32"
        style={{
          // Градиент от прозрачного к серебристому
          background: 'linear-gradient(to bottom, transparent, #c0c0c0)',
        }}
      />
      
      {/* ═══════════════════════════════════════════════════════════════ */}
      {/* ДИСКО-ШАР (GIF) */}
      {/* ═══════════════════════════════════════════════════════════════ */}
      <img 
        src={discoBallGif} 
        alt="Диско-шар" 
        className="w-64 h-64 md:w-80 md:h-80 object-contain drop-shadow-2xl"
        style={{
          // Фильтры: тень + обесцвечивание + яркость
          filter: 'drop-shadow(0 10px 30px rgba(0, 0, 0, 0.3)) saturate(0) brightness(1.3)',
        }}
      />
      
      {/* ═══════════════════════════════════════════════════════════════ */}
      {/* ЛУЧИ СВЕТА */}
      {/* ═══════════════════════════════════════════════════════════════ */}
      <div className="absolute inset-0 pointer-events-none">
        {/* Создаём 8 лучей с разными углами поворота */}
        {[...Array(8)].map((_, i) => (
          <div
            key={i}
            className="absolute left-1/2 top-1/2 w-1 h-20 opacity-30 animate-pulse"
            style={{
              // Градиент: от белого к прозрачному
              background: 'linear-gradient(to bottom, rgba(255, 255, 255, 0.8), transparent)',
              // Каждый луч повёрнут на 45° * i
              transform: `translate(-50%, -50%) rotate(${i * 45}deg)`,
              // Задержка анимации для эффекта "мерцания"
              animationDelay: `${i * 0.2}s`,
            }}
          />
        ))}
      </div>
    </div>
  );
};

export default DiscoBall;
